<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">

<title>blog | TimJRobinson | Always be learning | Page 2</title>

<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php">
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="//static.addtoany.com">
<link rel="dns-prefetch" href="//www.googletagmanager.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="alternate" type="application/rss+xml" title="TimJRobinson &raquo; Feed" href="/feed/">
<link rel="alternate" type="application/rss+xml" title="TimJRobinson &raquo; Comments Feed" href="/comments/feed/">
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.1.1"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode,e=(p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0),i.toDataURL());return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([129777,127995,8205,129778,127999],[129777,127995,8203,129778,127999])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style>
	<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=6.1.1" type="text/css" media="all">
<link rel="stylesheet" id="classic-theme-styles-css" href="/wp-includes/css/classic-themes.min.css?ver=1" type="text/css" media="all">
<style id="global-styles-inline-css" type="text/css">body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="casper-google-fonts-css" href="//fonts.googleapis.com/css?family=Noto+Serif%3A400%2C700%2C400italic%7COpen+Sans%3A700%2C400&#038;ver=6.1.1" type="text/css" media="all">
<link rel="stylesheet" id="casper-style-css" href="/wp-content/themes/casper/style.css?ver=6.1.1" type="text/css" media="all">
<link rel="stylesheet" id="addtoany-css" href="/wp-content/plugins/add-to-any/addtoany.min.css?ver=1.16" type="text/css" media="all">
<style id="addtoany-inline-css" type="text/css">@media screen and (max-width:980px){
.a2a_floating_style.a2a_vertical_style{display:none;}
}</style>
<script type="text/javascript" id="addtoany-core-js-before">window.a2a_config=window.a2a_config||{};a2a_config.callbacks=[];a2a_config.overlays=[];a2a_config.templates={};</script>
<script type="text/javascript" async src="https://static.addtoany.com/menu/page.js" id="addtoany-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery.min.js?ver=3.6.1" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2" id="jquery-migrate-js"></script>
<script type="text/javascript" async src="/wp-content/plugins/add-to-any/addtoany.min.js?ver=1.1" id="addtoany-jquery-js"></script>
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-2436267-3&#038;ver=6.1.1" id="wk-analytics-script-js"></script>
<script type="text/javascript" id="wk-analytics-script-js-after">function shouldTrack(){
var trackLoggedIn = false;
var loggedIn = false;
if(!loggedIn){
return true;
} else if( trackLoggedIn ) {
return true;
}
return false;
}
function hasWKGoogleAnalyticsCookie() {
return (new RegExp('wp_wk_ga_untrack_' + document.location.hostname)).test(document.cookie);
}
if (!hasWKGoogleAnalyticsCookie() && shouldTrack()) {
//Google Analytics
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-2436267-3');
}</script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 6.1.1">

   	<style type="text/css">.blog-title a, .blog-description, .social-icons a { color: #ffffff; }
		
						                        	body:not(.home) .site-head:after { display: none; }
        	body:not(.home) #masthead{ height: auto; border: none; }
        	body:not(.home) .blog-title, body:not(.home) .blog-description { display: none; }
        	body:not(.home) .inner { padding-top: 1em; }
        	body:not(.home) .main-navigation { position: relative; }
        
		
							.main-navigation a { color: ; }</style>
    		<style type="text/css" id="wp-custom-css">.wp-block-image figcaption {
	font-size: 0.5em;
	line-height: 1.5em;
	margin: 0em 3em 0em 3em;
}

body {
	background-color: #fff;
}

h1, h2, h3, h4, h5 {
	color: #222;
}

h1 a, h2 a, h3 a, h4 a, h5 a {
	color: #222;
}

#disqus_thread {
	margin: 10px auto;
}</style>
		</head>

<body class="blog paged paged-2">



<main id="content" class="content" role="main">


		
						
				
<article id="post-129" class="post-129 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/back-to-wordpress/" rel="bookmark"><time class="entry-date published" datetime="2017-02-26T04:01:24+00:00">February 26, 2017</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/back-to-wordpress/" rel="bookmark">Back to WordPress</a></h1>
         
    </header>
	<section class="post-content">

		<p>I gave Ghost a good shot. And I do love it as a blogging platform, the markdown and writing experience is beautiful. But I&#8217;ve switched this site back to WordPress because I want it to be more than just a blog. I&#8217;ve been inspired by <a href="https://sivers.org/">Derek Sivers&#8217;s site</a> and want to make this a platform for many different videos, reviews, and projects I&#8217;m working on. If you notice anything broken please let me know.</p>
<p>I&#8217;ve also installed the <a href="https://wordpress.org/plugins/jetpack-markdown/">Jetpack Markdown</a> plugin because writing in markdown is so much nicer and cleaner than the default wordpress editing experience (or maybe I&#8217;ve just become used to it, coding and submitting PR&#8217;s on Github for the last 2 years).</p>
<p>I did like that Ghost was written in NodeJS, which I love far more than PHP, but in the end I did very little actual core hacking so that really didn&#8217;t matter.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-120" class="post-120 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/get-docker-container-start-time-in-unix-timestamp-seconds/" rel="bookmark"><time class="entry-date published" datetime="2016-06-21T14:28:02+00:00">June 21, 2016</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/get-docker-container-start-time-in-unix-timestamp-seconds/" rel="bookmark">Get docker container start time in unix timestamp (seconds)</a></h1>
         
    </header>
	<section class="post-content">

		<p>You can use the following command to get the start time of a docker container in a unix timestamp (seconds since 1970).</p>
<pre><code>docker inspect --format='{{.State.StartedAt}}' &lt;CONTAINERID&gt; | xargs date +%s -d
</code></pre>
<p>Just replace <code>&lt;CONTAINERID&gt;</code> with the actual container id.</p>
<p>Or you can use this to get the start time of all your containers:</p>
<pre><code>docker ps -q | xargs docker inspect --format='{{.State.StartedAt}}' | xargs -n1 date +%s -d
</code></pre>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-119" class="post-119 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/how-to-stop-datadog-alert-recoveries-going-to-pagerduty/" rel="bookmark"><time class="entry-date published" datetime="2016-03-28T20:58:28+00:00">March 28, 2016</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/how-to-stop-datadog-alert-recoveries-going-to-pagerduty/" rel="bookmark">How to stop Datadog alert recoveries going to Pagerduty</a></h1>
         
    </header>
	<section class="post-content">

		<p>At Cloud9 we use Datadog for all our server monitoring and Pagerduty for alerts when things break. To do this we use the standard <a href="https://www.pagerduty.com/docs/guides/datadog-integration-guide/">Datadog + Pagerduty integration</a> and make Pagerduty automatically trigger for critical incidents by adding <code>@pagerduty</code> into the &#8220;Say what&#8217;s happening&#8221; field in the Datadog monitor.</p>
<p>Unfortunately datadog triggers the monitor both when it starts and when it has recovered. Because we had <code>@pagerduty</code> in the &#8220;Say what&#8217;s happening&#8221; area this meant we got a pagerduty call both times.</p>
<p>You can fix this by wrapping the <code>@pagerduty</code> trigger with <code>{{#is_alert}}{{/is_alert}}</code>. So your monitor should look something like:</p>
<pre><code>Docker is having trouble creating containers. Please investigate @slack-datadog @slack-warnings {{#is_alert}}@pagerduty{{/is_alert}}
</code></pre>
<p>You can also use <code>{{#is_warning}}@pagerduty{{/is_warning}}</code> for warnings (where the monitor has gone over the warning threshold but not the alert threshold).</p>
<p>Then you can go back to bed safe in the knowledge your server isn&#8217;t going to wake you up to tell you &#8220;Everything is good, nothing is broken&#8221;.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-118" class="post-118 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/how-to-get-docker-ps-data-in-json-format/" rel="bookmark"><time class="entry-date published" datetime="2016-01-06T18:06:58+00:00">January 6, 2016</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/how-to-get-docker-ps-data-in-json-format/" rel="bookmark">How to get docker ps data in JSON format</a></h1>
         
    </header>
	<section class="post-content">

		<p>If you want to get the output of <code>docker ps</code> in JSON format the easiest way is to run the remote docker API and use that, you can <a href="http://www.virtuallyghetto.com/2014/07/quick-tip-how-to-enable-docker-remote-api.html">read about how to do that here</a></p>
<p>However if you can&#8217;t run the remote API because of security issues or for other reasons there is another way! With curl version 7.40 (<a href="http://www.linuxfromscratch.org/blfs/view/svn/basicnet/curl.html">If this isn&#8217;t available on your distro click here</a>) and newer you can get data from the local unix socket, and docker always runs the remote api on docker.sock.</p>
<p>Here&#8217;s what you have to run:</p>
<pre><code>curl --unix-socket /var/run/docker.sock http://localhost/containers/json
</code></pre>
<p>Tada! Nice JSON Formatted docker ps output. I recommend using <a href="https://stedolan.github.io/jq/">the jq library</a> if you want an easy way to parse it in bash.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-116" class="post-116 post type-post status-publish format-standard hentry category-uncategorized tag-cloud9 tag-hfsc tag-linux tag-tc tag-traffic-control tag-traffic-shaping">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/linux-traffic-control-hscf-what-is-default-classid/" rel="bookmark"><time class="entry-date published" datetime="2015-11-26T19:35:49+00:00">November 26, 2015</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/linux-traffic-control-hscf-what-is-default-classid/" rel="bookmark">Linux Traffic control hfsc what is [default $CLASSID]</a></h1>
         
    </header>
	<section class="post-content">

		<p>While learning our traffic control setup at Cloud9 I came across this line:</p>
<pre><code>tc qdisc add dev $IFACE root handle 1: hfsc default 12
</code></pre>
<p>Most of it is explained by these great in depth guides to tc and hfsc traffic shaping:</p>
<p>http://linux-tc-notes.sourceforge.net/tc/doc/sch_hfsc.txt<br>
http://linux-ip.net/articles/hfsc.en/</p>
<p>And the man page at:</p>
<p>http://manpages.ubuntu.com/manpages/trusty/man8/tc-hfsc.8.html</p>
<p>The only thing I couldn&#8217;t figure out was what <code>default 12</code> means. I originally thought it was some inbuilt default policy that comes included with tc. But it actually refers to the class that you&#8217;ve defined that it should fall back to using when nothing else matches.</p>
<p>So in our case we had the following other classes defined:</p>
<pre><code>tc class add dev $IFACE parent 1:1 classid 1:10 hfsc rt m1 $HALF_MAXUP d 10ms m2 $MAX_UPRATE
tc class add dev $IFACE parent 1:1 classid 1:11 hfsc ls m2 $HALF_MAXUP ul m2 $MAX_UPRATE
tc class add dev $IFACE parent 1:1 classid 1:12 hfsc ls m2 $LOW_MAXUP ul m2 $LOW_MAXUP
tc class add dev $IFACE parent 1:1 classid 1:13 hfsc ls m2 $VERY_LOW_MAXUP ul m2 $VERY_LOW_MAXUP
</code></pre>
<p><code>$IFACE</code> is the interface we&#8217;re running the rules on and the rates such as <code>$HALF_MAXUP</code> are network speeds in kbps that we&#8217;ve set and are still experimenting with.</p>
<p>Below this we then had a bunch of rules that prioritize different traffic types which look like below:</p>
<pre><code># prioritize SSH
$TC filter add dev $IFACE protocol ip parent 1: prio 1 u32 match ip sport 22 0xffff flowid 1:10
$TC filter add dev $IFACE protocol ip parent 1: prio 1 u32 match ip dport 22 0xffff flowid 1:10

# prioritize DNS
$TC filter add dev $IFACE protocol ip parent 1: prio 2 u32 match ip sport 53 0xffff match ip protocol 0x6 0xff flowid 1:10
$TC filter add dev $IFACE protocol ip parent 1: prio 2 u32 match ip dport 53 0xffff match ip protocol 0x6 0xff flowid 1:10

# prioritize application traffic
$TC filter add dev $IFACE protocol ip parent 1: prio 3 u32 match ip sport 8080 0xffff flowid 1:11
$TC filter add dev $IFACE protocol ip parent 1: prio 3 u32 match ip sport 8081 0xffff flowid 1:11
$TC filter add dev $IFACE protocol ip parent 1: prio 3 u32 match ip sport 8082 0xffff flowid 1:11

# Make UDP and ICMP really slow, they are rarely used for legitimate purposes
$TC filter add dev $IFACE protocol ip parent 1: prio 4 u32 match ip protocol 17 0xff flowid 1:13
$TC filter add dev $IFACE protocol ip parent 1: prio 4 u32 match ip protocol 1 0xff flowid 1:13
</code></pre>
<p>These rules ensure our users are able to ssh, resolve sites and host their applications at full speed, while throttling those who may be attempting to use Cloud9 for nefarious reasons. We also have other blocking rules not included here for security reasons.</p>
<p>So all outbound traffic that doesn&#8217;t match these rules is subject to the rules of class 1:12 which gives users <code>$LOW_MAXUP</code> bandwidth with a <code>$LOW_MAXUP</code> burst speed for uploads. That&#8217;s what the <code>default 12</code> at the end means.</p>
<p>Let me know if you have any questions about this or suggestions on how to improve our traffic shaping. I&#8217;m no expert on this and didn&#8217;t write most of these rules, but just sharing what I&#8217;ve learnt to help others having the same confusions.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-127" class="post-127 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/the-power-of-routes-in-express-4/" rel="bookmark"><time class="entry-date published" datetime="2015-10-07T21:51:19+00:00">October 7, 2015</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/the-power-of-routes-in-express-4/" rel="bookmark">Using Express 4 routes to secure your web app</a></h1>
         
    </header>
	<section class="post-content">

		<p>Today I had the fun task of taking Cloud9&#8217;s build bot and making it more secure. Primarily because it&#8217;s now exposed to the outside world and we don&#8217;t want random strangers having the ability to ship or revert our code.</p>
<p>Our bot responds to slash commands on Slack, so we can type <code>/ship [appname]</code> at any time in any channel in slack and the latest tested code will be pushed to production. It also recieves notifications from Jenkins when jobs have started, succeeded or failed.</p>
<h3>Securing Slack</h3>
<p>The first step was ensuring all Slack commands were actually coming from Slack. Whenever you create a new slash command Slack tells you it will send a specific token with all api calls, and you should use this to verify the call is from Slack.</p>
<p>Now there are multiple routes we wanted our bot to talk to and multiple slash commands to reach them, each with their own tokens. But we don&#8217;t want to add if (token == &#8216;xyz&#8217;) to every single route. Firstly because it&#8217;s messy, and secondly because then whenever a new developer joins the project they have to remember to do that or they&#8217;ll compromise security. So how do we do it? By creating a /slack route that verifies every token for us.</p>
<pre><code>var express = require("express");
var config = require("config);

function verifyToken(req, res, next) {
if (!req.body.token || config.get("slack.tokens").indexOf(req.body.token) === -1) {
return next(new Error("Invalid slack token" + req.body.token));
}
next();
}

var slackRouter = new express.Router();
slackRouter.use(verifyToken);

slackRouter.post("/highfive", highFive.handleRequest.bind(highFive));
slackRouter.post("/ship", ship.startShipping.bind(ship));

app.use("/slack", slackRouter);
</code></pre>
<p>We have an array of possible slack tokens stored in our config file and whenever we add or remove commands we can simply add the token to that one list.</p>
<p>Now our routes are <code>/slack/ship</code> and <code>/slack/highfive</code> and whenever anyone sends data to them it will always validate that they have a valid slack token. No more manual verification in each route or having new developers forget to add security to their route, it&#8217;s all automatic.</p>
<h3>Securing Jenkins</h3>
<p>Our bot also listens to build hooks from Jenkins so that it can post to our Slack channel letting us know about the stats of various jobs.</p>
<p>We can secure Jenkins in the same way, but because it doesn&#8217;t pass any custom data in these job notifications we&#8217;ll secure it based on the requester IP address.</p>
<pre><code>var requestIp = require("request-ip");

function verifyIPIsJenkins(req, res, next) {
var reqIp = requestIp.getClientIp(req);
if (!reqIp || config.get("jenkins.ips").indexOf(reqIp) === -1) {
return next(new Error("Jenkins push request came from " + reqIp + " which isn't a known address"));
}

return next();
};

var jenkinsRouter = new express.Router();
jenkinsRouter.use(verifyIPIsJenkins);

jenkinsRouter.post("/success", jenkins.buildSuccess.bind(jenkins));
jenkinsRouter.post("/failed", jenkins.buildFailed.bind(jenkins));

app.use("/jenkins", jenkinsRouter);
</code></pre>
<p>Now just like above we have 2 routes at <code>/jenkins/success</code> and <code>/jenkins/failed</code> and whenever anyone tries to access them it automatically verifies they are our CI server. If they are not the request will fail.</p>
<p>The reason I enjoy using these routes is they keep the code neat and also ensure that when someone comes to work on this project in the future they can easily add another route and won&#8217;t accidently allow hackers in the back door. Keeping things simple and automatic so any developer can pick up this code and run with it is my style of programming.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-104" class="post-104 post type-post status-publish format-standard hentry category-uncategorized tag-above-the-fold tag-copywriting tag-internet-marketing tag-landing-pages">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/above-the-fold-is-stupid/" rel="bookmark"><time class="entry-date published" datetime="2015-09-30T18:37:55+00:00">September 30, 2015</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/above-the-fold-is-stupid/" rel="bookmark">Above the fold is stupid</a></h1>
         
    </header>
	<section class="post-content">

		<p>A short post for those in Internet Marketing who still believe the &#8220;Put everything above the fold because people don&#8217;t usually scroll down&#8221; myth. Unfortunately whoever originally said this didn&#8217;t quite think the data through and it has been repeated ad-nausium by Internet Marketers ever since.</p>
<p>Here&#8217;s why you shouldn&#8217;t worry about putting your stuff above the fold and it may even be counterproductive to jam it all up there:</p>
<ol>
<li>Most people aren&#8217;t interested in what you&#8217;re selling. Especially if your traffic isn&#8217;t pre-sold or coming from relevant locations. Not all traffic is equal and I really wish people would stop a/b testing like it is. </li>
<li>60% of people don&#8217;t scroll down because they don&#8217;t like what you have to sell, not because they don&#8217;t know how to scroll. </li>
<li>Putting your signup form above the fold is counterproductive. Just because people don&#8217;t scroll dosn&#8217;t mean they&#8217;re going to be like &#8220;Oh wow a signup form, I better add my details&#8221;. </li>
<li>If you had better content or marketing in place of that signup form you&#8217;ll probably (test this!) get better results as you hook people in and get them to register later. </li>
</ol>
<p>The core thing you should be putting above the fold is content that sucks your visitors in, something that within 5 seconds makes them think &#8220;Hey this is a problem I have and they may have the solution&#8221;.</p>
<p>Here are things that should not be above the fold:</p>
<ol>
<li>Videos that start slowly (boring)</li>
<li>Signup forms (seriously the only person who would sign up without reading is your Mum, or heavily presold visitors, in which case it doesn&#8217;t matter where your signup form is). </li>
<li>Pictures that mean nothing to fresh visitors (your logo, stock photography, banners etc). </li>
<li>Links (If you want your visitors to do something don&#8217;t overload them with options). </li>
</ol>
<p>Now go build a landing page people actually enjoy and remember: test everything. If you think I&#8217;m wrong run a test then come back here and tell me how wrong I am. Being told I&#8217;m wrong is fantastic, because it helps me constantly grow and be a better market and human being.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-125" class="post-125 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/git-show-all-commits-between-two-versions/" rel="bookmark"><time class="entry-date published" datetime="2015-09-20T16:11:17+00:00">September 20, 2015</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/git-show-all-commits-between-two-versions/" rel="bookmark">Git show all commits between two versions</a></h1>
         
    </header>
	<section class="post-content">

		<p>So you want to upgrade a library but don&#8217;t know what&#8217;s changed? Easy enough to do in git. Most projects tag their releases with something like v1.2.3. If you want to see all the commits between two of these releases simply do:</p>
<pre><code>git log --no-merges v1.2.3 --not v1.2.2 
</code></pre>
<p>This shows all commits from v1.2.3 that aren&#8217;t in v1.2.2.</p>
<p>Or if you want a short summary grouped by author you can do:</p>
<pre><code>git shortlog --no-merges v1.2.3 --not v1.2.2 
</code></pre>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-124" class="post-124 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/git-create-new-branches-basing-them-off-master/" rel="bookmark"><time class="entry-date published" datetime="2015-09-20T13:46:46+00:00">September 20, 2015</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/git-create-new-branches-basing-them-off-master/" rel="bookmark">Git create new branches basing them off master</a></h1>
         
    </header>
	<section class="post-content">

		<p>For the longest time I&#8217;d had the frustration of working on one branch, needing to create another branch for a bug fix, then creating a PR with this bug fix only to discover all the commits from the original branch are now in the PR.</p>
<p>Today I discovered you can actually specify the base branch in the git checkout command. Simply do this:</p>
<pre><code>git checkout -b newbranch master
</code></pre>
<p>It will create and switch to the new branch basing it off master. I&#8217;ve created a new script called &#8216;gnb&#8217; (for &#8216;git new branch&#8217;) to do this all the time for me now. <a href="https://github.com/timjrobinson/scripts/blob/master/gnb">You can see it here</a></p>
<p>Also if you&#8217;ve already submitted the PR and now want to remove those additional commits you can easily do this by rebasing your new branch off master.</p>
<pre><code>git rebase --onto master originalbranch newbranch
git push origin +newbranch # Force push as we're re-writing history here
</code></pre>
<p>This will rebase all the commits you did in newbranch onto master skipping commits that are in originalbranch.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-123" class="post-123 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/simple-script-to-use-run-a-fake-process-on-a-port/" rel="bookmark"><time class="entry-date published" datetime="2015-09-03T10:18:50+00:00">September 3, 2015</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/simple-script-to-use-run-a-fake-process-on-a-port/" rel="bookmark">Simple script to use / run a fake process on a port</a></h1>
         
    </header>
	<section class="post-content">

		<p>While testing some shell scripts I needed a simple way to tie up a port on the server to cause the shell scripts to error out.</p>
<p>I did some googling and couldn&#8217;t find any way to do this in pure bash but if you have NodeJS installed on your server it&#8217;s as simple as this:</p>
<pre><code>node -e 'require("http").createServer(function(){}).listen(PORT);'
</code></pre>
<p>Simply replace PORT with the port number you wish to use. If anyone knows a way to do this in pure bash please let me know.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				<nav class="pagination navigation paging-navigation" role="navigation">
		<div class="nav-links">
						<div class="older-posts"><a href="/blog/page/3/">Older Posts <span class="meta-nav">&rarr;</span></a></div>
							<div class="page-number">Page 2 of 5</div>
						<div class="newer-posts"><a href="/blog/"><span class="meta-nav">&larr;</span> Newer Posts</a></div>
			
		</div>
<!-- .nav-links -->
	</nav><!-- .navigation -->
	

		

	<div id="secondary" class="widget-area" role="complementary">
		
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h1 class="widget-title">Recent Posts</h1>
		<ul>
											<li>
					<a href="/universal-basic-income-is-capitalism-2-0/">Universal Basic Income is Capitalism 2.0</a>
									</li>
											<li>
					<a href="/how-to-combine-getting-things-done-with-trello/">How to combine Getting Things Done with Trello</a>
									</li>
											<li>
					<a href="/fixing-node-gyp-permission-denied-when-running-as-root/">Fixing node-gyp: Permission Denied when running as root</a>
									</li>
											<li>
					<a href="/neato-the-evolutionary-ai-battle-simulator/">NEATo &#8211; The Evolutionary AI Battle Simulator</a>
									</li>
											<li>
					<a href="/new-site-a-decentralized-world/">New Site &#8211; A Decentralized World</a>
									</li>
					</ul>

		</aside><aside id="custom_html-3" class="widget_text widget widget_custom_html"><h1 class="widget-title">Newsletter</h1>
<div class="textwidget custom-html-widget"><iframe src="https://timjrobinson.substack.com/embed" style="border:1px solid #EEE; background:white;" scrolling="no" width="700" height="320" frameborder="0"></iframe></div></aside>		<div class="clear">&nbsp;</div>
	</div>
<!-- #secondary -->
	<footer id="colophon" class="site-footer" role="contentinfo">
	    <a class="subscribe icon-feed" href="/feed/"><span class="tooltip">Subscribe!</span></a>
		<div class="site-info inner">
		    <section class="copyright">
		    			    		<a href="https://github.com/lacymorrow/casper" rel="home">Casper WP</a> by Lacy Morrow		    			    </section>
		</div>
<!-- .site-info -->
	</footer><!-- #colophon -->
</main><!-- /#content -->

<div class="a2a_kit a2a_kit_size_32 a2a_floating_style a2a_vertical_style" style="left:0px;top:100px;background-color:transparent">
<a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=%2Fblog%2Fpage%2F2%2F%3Fsimply_static_page%3D102&amp;linkname=TimJRobinson" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=%2Fblog%2Fpage%2F2%2F%3Fsimply_static_page%3D102&amp;linkname=TimJRobinson" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=%2Fblog%2Fpage%2F2%2F%3Fsimply_static_page%3D102&amp;linkname=TimJRobinson" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_pocket" href="https://www.addtoany.com/add_to/pocket?linkurl=%2Fblog%2Fpage%2F2%2F%3Fsimply_static_page%3D102&amp;linkname=TimJRobinson" title="Pocket" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=%2Fblog%2Fpage%2F2%2F%3Fsimply_static_page%3D102&amp;linkname=TimJRobinson" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share"></a>
</div>
<script type="text/javascript" id="disqus_count-js-extra">
/* <![CDATA[ */
var countVars = {"disqusShortname":"timjrobinsonblog"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/disqus-comment-system/public/js/comment_count.js?ver=3.0.22" id="disqus_count-js"></script>
<script type="text/javascript" src="/wp-content/themes/casper/js/main.js?ver=1.0.0" id="casper-index-js"></script>
</body>


<!-- Dynamic page generated in 0.035 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2023-02-19 09:58:25 -->

<!-- Compression = gzip -->
</html>