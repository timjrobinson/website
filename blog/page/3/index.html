<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">

<title>blog | TimJRobinson | Always be learning | Page 3</title>

<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php">
<meta name="robots" content="max-image-preview:large">
<link rel="dns-prefetch" href="//static.addtoany.com">
<link rel="dns-prefetch" href="//www.googletagmanager.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="alternate" type="application/rss+xml" title="TimJRobinson &raquo; Feed" href="/feed/">
<link rel="alternate" type="application/rss+xml" title="TimJRobinson &raquo; Comments Feed" href="/comments/feed/">
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.1.1"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode,e=(p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0),i.toDataURL());return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([129777,127995,8205,129778,127999],[129777,127995,8203,129778,127999])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style>
	<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=6.1.1" type="text/css" media="all">
<link rel="stylesheet" id="classic-theme-styles-css" href="/wp-includes/css/classic-themes.min.css?ver=1" type="text/css" media="all">
<style id="global-styles-inline-css" type="text/css">body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="casper-google-fonts-css" href="//fonts.googleapis.com/css?family=Noto+Serif%3A400%2C700%2C400italic%7COpen+Sans%3A700%2C400&#038;ver=6.1.1" type="text/css" media="all">
<link rel="stylesheet" id="casper-style-css" href="/wp-content/themes/casper/style.css?ver=6.1.1" type="text/css" media="all">
<link rel="stylesheet" id="addtoany-css" href="/wp-content/plugins/add-to-any/addtoany.min.css?ver=1.16" type="text/css" media="all">
<style id="addtoany-inline-css" type="text/css">@media screen and (max-width:980px){
.a2a_floating_style.a2a_vertical_style{display:none;}
}</style>
<script type="text/javascript" id="addtoany-core-js-before">window.a2a_config=window.a2a_config||{};a2a_config.callbacks=[];a2a_config.overlays=[];a2a_config.templates={};</script>
<script type="text/javascript" async src="https://static.addtoany.com/menu/page.js" id="addtoany-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery.min.js?ver=3.6.1" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2" id="jquery-migrate-js"></script>
<script type="text/javascript" async src="/wp-content/plugins/add-to-any/addtoany.min.js?ver=1.1" id="addtoany-jquery-js"></script>
<script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-2436267-3&#038;ver=6.1.1" id="wk-analytics-script-js"></script>
<script type="text/javascript" id="wk-analytics-script-js-after">function shouldTrack(){
var trackLoggedIn = false;
var loggedIn = false;
if(!loggedIn){
return true;
} else if( trackLoggedIn ) {
return true;
}
return false;
}
function hasWKGoogleAnalyticsCookie() {
return (new RegExp('wp_wk_ga_untrack_' + document.location.hostname)).test(document.cookie);
}
if (!hasWKGoogleAnalyticsCookie() && shouldTrack()) {
//Google Analytics
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-2436267-3');
}</script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 6.1.1">

   	<style type="text/css">.blog-title a, .blog-description, .social-icons a { color: #ffffff; }
		
						                        	body:not(.home) .site-head:after { display: none; }
        	body:not(.home) #masthead{ height: auto; border: none; }
        	body:not(.home) .blog-title, body:not(.home) .blog-description { display: none; }
        	body:not(.home) .inner { padding-top: 1em; }
        	body:not(.home) .main-navigation { position: relative; }
        
		
							.main-navigation a { color: ; }</style>
    		<style type="text/css" id="wp-custom-css">.wp-block-image figcaption {
	font-size: 0.5em;
	line-height: 1.5em;
	margin: 0em 3em 0em 3em;
}

body {
	background-color: #fff;
}

h1, h2, h3, h4, h5 {
	color: #222;
}

h1 a, h2 a, h3 a, h4 a, h5 a {
	color: #222;
}

#disqus_thread {
	margin: 10px auto;
}</style>
		</head>

<body class="blog paged paged-3">



<main id="content" class="content" role="main">


		
						
				
<article id="post-122" class="post-122 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/haproxy-how-to-run-http-https-on-the-same-port/" rel="bookmark"><time class="entry-date published" datetime="2015-09-02T16:08:55+00:00">September 2, 2015</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/haproxy-how-to-run-http-https-on-the-same-port/" rel="bookmark">HAProxy &#8211; How to run http and https on the same port</a></h1>
         
    </header>
	<section class="post-content">

		<p>Want to have your app run on one just the one port but work in both http and https mode? It&#8217;s easily done. You&#8217;ll first have to have a normal frontend for ports 80 and 443 similar to the following:</p>
<pre><code>frontend unsecured *:80
timeout client 1d
maxconn 20000

default_backend default

frontend secured
maxconn 20000
bind   0.0.0.0:443 ssl crt /etc/haproxy/proxycert.cert

default_backend default
</code></pre>
<p>You probably already have this setup if you&#8217;re running HAProxy, no need to change it if you do.</p>
<p>Now to make another port (9000 in this example) work with both http and https just do the following:</p>
<pre><code>frontend newport
maxconn 20000

bind   0.0.0.0:9000

mode tcp
option tcplog

tcp-request inspect-delay 100ms
tcp-request content accept if HTTP
tcp-request content accept if { req.ssl_hello_type 1 }

use_backend forward_http if HTTP
default_backend forward_https

backend forward_http
mode tcp
server serverhttp 127.0.0.1:80

backend forward_https
mode tcp
server serverhttps 127.0.0.1:443
</code></pre>
<p>It simply takes 100ms (this could be lowered but I didn&#8217;t want things to accidentally break) to detect what mode the connection is in. If it&#8217;s in HTTP it forwards the request to itself on port 80 and if not it forwards to itself on port 443.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-109" class="post-109 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/how-to-uninstall-delete-osx-mail-app/" rel="bookmark"><time class="entry-date published" datetime="2015-07-22T09:18:16+00:00">July 22, 2015</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/how-to-uninstall-delete-osx-mail-app/" rel="bookmark">How to uninstall / delete OSX mail app</a></h1>
         
    </header>
	<section class="post-content">

		<p>Unfortunately Apple love forcing their software on users and providing no way to uninstall. If you&#8217;re sick of apple mail popping up every time you click an email link or pressing cmd + shift + i (as I often do trying to get into the web dev tools in chrome) do the following in your terminal to remove it:</p>
<pre><code>sudo -i 
mkdir /dump
mv /Applications/Mail.app /dump
mv /usr/bin/mail /dump
chmod 000 /dump
</code></pre>
<p>You could also rm -rf the files but I like to keep them around just in case OSX breaks somehow. If you don&#8217;t run the chmod command OSX will actually detect the file has moved and ask you to set it up again.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-103" class="post-103 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/docker-lxc-set-memory-limit-invalid-argument/" rel="bookmark"><time class="entry-date published" datetime="2014-12-12T09:24:26+00:00">December 12, 2014</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/docker-lxc-set-memory-limit-invalid-argument/" rel="bookmark">Docker / lxc set memory limit invalid argument</a></h1>
         
    </header>
	<section class="post-content">

		<p>When trying to resize a docker or LXC container by changing the value in /sys/fs/cgroup/memory/docker/<id>/memory.limit&#95;in&#95;bytes if you come across the error</id></p>
<pre><code>write error: Invalid argument
</code></pre>
<p>When going above a certain amount (for me it was 1024MB).</p>
<p>It&#8217;s most likely due to your memory limit being higher than your memory + swap limit. You need to edit the file memory.memsw.limit&#95;in&#95;bytes and increase it&#8217;s value.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-102" class="post-102 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/how-to-test-memory-limits-of-a-docker-container/" rel="bookmark"><time class="entry-date published" datetime="2014-12-11T12:03:01+00:00">December 11, 2014</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/how-to-test-memory-limits-of-a-docker-container/" rel="bookmark">How to test memory limits of a docker container</a></h1>
         
    </header>
	<section class="post-content">

		<p>I&#8217;ve been playing around with docker containers recently including setting memory limits. But Google had wasn&#8217;t much help. So posting a simple method I discovered here. You do need php installed in your container.</p>
<pre><code>truncate -s 1G /tmp/1G
php -r 'file("/tmp/1G");
</code></pre>
<p>All it does is create a 1 gigabyte file in the /tmp directory then attempts to read it in using PHP. PHP being PHP tries to load it all at once and if your memory limits are working correctly should give a Fatal error.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-97" class="post-97 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/teamcity-stop-double-building-the-same-project/" rel="bookmark"><time class="entry-date published" datetime="2014-08-27T09:33:53+00:00">August 27, 2014</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/teamcity-stop-double-building-the-same-project/" rel="bookmark">Teamcity stop double building the same project</a></h1>
         
    </header>
	<section class="post-content">

		<p>It is annoying when Teamcity builds the same project twice at the same time. Especially when some of the steps are to decomission old servers and deploy new ones and the two builds end up trampling all over each other.</p>
<p>The option to disable this is tricky to find. First go to your project build configuration. Then click on general settings on the left hand side. Then click the &#8216;show advanced options&#8217; just above the save button in the main column. When you click this it now has an option to &#8220;Limit the number of simultaneously running builds (0 — unlimited)&#8221;. Enter 1 in this box. Hit save and you&#8217;ll no longer have 2 builds of the same project at the same time.</p>
<p>This is with teamcity version 8.1.3. It may be in a different spot in future versions.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-96" class="post-96 post type-post status-publish format-standard hentry category-uncategorized tag-directory tag-installed tag-ubuntu">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/ubuntu-logstash-default-install-directory/" rel="bookmark"><time class="entry-date published" datetime="2014-08-26T07:50:58+00:00">August 26, 2014</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/ubuntu-logstash-default-install-directory/" rel="bookmark">Ubuntu logstash default install directory</a></h1>
         
    </header>
	<section class="post-content">

		<p>When you install logstash via apt-get it installs to /opt/logstash. This is valid as of logstash v1.4 ubuntu v14.04.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-95" class="post-95 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/puppet-how-to-force-apt-get-update/" rel="bookmark"><time class="entry-date published" datetime="2014-08-25T10:05:59+00:00">August 25, 2014</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/puppet-how-to-force-apt-get-update/" rel="bookmark">Puppet how to force apt-get update</a></h1>
         
    </header>
	<section class="post-content">

		<p>It seems the puppet apt module doesn&#8217;t runs apt-get update more than once even when you explicitly define it if you haven&#8217;t changes your sources.list. Because it thinks nothing has changed.</p>
<p>This is an issue we encountered with Tower Storm where we released new versions of private packages but our servers didn&#8217;t run apt-get update before trying to install them and so they&#8217;d try and fetch an old version and get a 404 error.</p>
<p>To fix it you simply need to add these lines to your manifest:</p>
<pre><code>class { 'apt':
always_apt_update =&gt; true,
}
</code></pre>
<p>Then install your packages like so:</p>
<pre><code>exec { 'apt-get-update':
command     =&gt; '/usr/bin/apt-get update',
refreshonly =&gt; true,
}

$packages = ["nodejs", "npm"]
package {
$packages: ensure =&gt; installed,
require    =&gt; Exec['apt-get-update'],
}
</code></pre>
<p>When your packages install they will first call apt-get update every time just to make sure they have the latest version.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-94" class="post-94 post type-post status-publish format-standard hentry category-uncategorized">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/tracking-down-open-connections-in-rethinkdb/" rel="bookmark"><time class="entry-date published" datetime="2014-07-27T10:13:52+00:00">July 27, 2014</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/tracking-down-open-connections-in-rethinkdb/" rel="bookmark">Tracking down stray open connections in rethinkdb</a></h1>
         
    </header>
	<section class="post-content">

		<p>Over the past few days rethinkdb has been giving me errors about handshake timeouts due to too many open connections. If you&#8217;ve had similar &#8216;handshake timeout&#8217; errors you&#8217;ve probably got the same problem.</p>
<p>Somewhere in the Tower Storm codebase connections were being made and not closed properly. Unfortunately the code base is huge and database calls are made in many places. Also when rethinkdb errors out it doesn&#8217;t give a stack trace or any indication of where connections are being tied up.</p>
<p>But I figured out a way to find connections that were not being closed properly.</p>
<p>Here&#8217;s my original connection code. This code is based off the <a href="http://www.rethinkdb.com/docs/examples/node-socket-chat/">example on the rethinkdb site</a>.</p>
<pre><code>### rethinkdb-client.coffee ###

r = require('rethinkdb')
netconfig = require('../config/netconfig')

db = r
db.onConnect = (callback) -&gt;
r.connect {host: netconfig.db.host, port: netconfig.db.port, db: 'towerstorm'}, (err, conn) -&gt;
if err then throw new Error(err)
if !conn then throw new Error("No RethinkDB connection returned")
callback(err, conn)

module.exports = db
</code></pre>
<p>And here&#8217;s how I modified the onConnect function to find the connections that were not being closed:</p>
<pre><code>db.onConnect = (callback) -&gt;
stack = new Error().stack
r.connect {host: netconfig.db.host, port: netconfig.db.port, db: 'towerstorm'}, (err, conn) -&gt;
if err then throw new Error(err)
if !conn then throw new Error("No RethinkDB connection returned")
setTimeout -&gt;
if conn &amp;&amp; conn.open
console.log("Connection created was not closed in 5 seconds. Stack: ", stack)
, 5000
callback(err, conn)
</code></pre>
<p>Firstly the line:</p>
<pre><code>stack = new Error().stack
</code></pre>
<p>Gets a stack trace of how we reached this db.onConnect function.</p>
<p>Then just before returning the connection I setup a callback to check the connection in 5 seconds. If it detects the connection is still open it gives me a stack trace showing exactly where it was opened and I can add a conn.close() in the appropriate spot.</p>
<p>And easy as that you can find and kill all your stray rethinkdb connections.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-88" class="post-88 post type-post status-publish format-standard hentry category-uncategorized tag-javascript tag-mock tag-mocking tag-sinon tag-sinon-js tag-sinonjs tag-spy tag-stub tag-unit-testing-2">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/unit-testing-javascript-use-sinon-js/" rel="bookmark"><time class="entry-date published" datetime="2014-06-19T07:57:07+00:00">June 19, 2014</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/unit-testing-javascript-use-sinon-js/" rel="bookmark">If you&#8217;re unit testing Javascript use Sinon.js, it&#8217;s more useful than you expect</a></h1>
         
    </header>
	<section class="post-content">

		<p>For a long time I didn&#8217;t use any unit testing libraries with Javascript. After all unlike Java you can do anything with your objects. If you want your car to be a cat that can walk you simply modify the object directly. So what&#8217;s the point of having a mocking library?</p>
<p>I discovered <a href="http://sinonjs.org/">sinon.js</a> a few months ago and immediately fell in love. It made me realize how much useless boilerplate code I had in my unit tests and immediately helped me write cleaner, more elegant code.</p>
<p>Here&#8217;s a very basic example of how I used to mock functions before and after sinon:</p>
<pre><code>/** Before sinon.js **/

getAnimationSheetArgs = null;
impactMock.game.cache.getAnimationSheet = function() {
getAnimationSheetArgs = arguments
};
bullet.loadAnimations();
assert(getAnimationSheetArgs != null);
assert.equal(getAnimationSheetArgs[0], "img/bullets/awesome.png");
assert.equal(getAnimationSheetArgs[1], 5);
assert.equal(getAnimationSheetArgs[2], 15);
</code></pre>
<pre><code>/** After sinon.js **/

impactMock.game.cache.getAnimationSheet = sinon.spy();
bullet.loadAnimations();
assert(impactMock.game.cache.getAnimationSheet.calledWith("img/bullets/awesome.png", 5, 15));
</code></pre>
<p>Before Sinon I had to declare a variable to hold the arguments passed to each function I wanted to mock. After using sinon this became one line and verifying the correct arguments were passed to the function can be done in one function call.</p>
<p>It may not look like much, but when you have over 1000 unit tests (as <a href="http://www.towerstorm.com/">Tower Storm</a> now has) it adds up to a lot of time saved.</p>
<p>Sinon also provides tons of functionality to stub out functions. You can make a method automatically return certain values or even call a callback with specific arguments (for testing async code).</p>
<p>Let&#8217;s say you want to test a render function to ensure user details are displayed. It looks like this:</p>
<pre><code>var AdminController = {
userInfo: function (req, res) {
userId = req.param('id');
User.findById(userId, function (err, user) {
if (err) return res.send(500);
res.jsonp(200, user.data);
});
}
}
</code></pre>
<p>Now we only want to test that user.data is being sent to the browser. We don&#8217;t want to actually hit the database and find a user with findById so we need to mock it out.</p>
<pre><code>it("Should send user.data to the browser", function () {
var mockUser = {data: {name: 'test'}};
sinon.stub(User, 'findById').callsArgWith(1, null, mockUser);
req = {param: sinon.stub().returns(123)};
res = {jsonp: sinon.spy()};
AdminController.userInfo(req, res);
assert(res.jsonp.calledWith(200, {name: 'test'}));
User.findById.restore()
});
</code></pre>
<p>On line 1 we create a mock user which we want to display. Then we stub the User.findById method to instantly call argument 1 (the callback) with the 2 arguments null and mockUser (for it&#8217;s err and user arguments).<br>
On line 3 we create req as an object with just the param method. We set param to a sinon stub and make it instantly return 123 (the user&#8217;s id, although it can return anything as User.findById doesn&#8217;t even use it).<br>
On line 4 we create res as an object that only has a jsonp method. We set this method to be a sinon spy as it doesn&#8217;t need to return anything, it only needs to record what it was called with.<br>
On lines 5 and 6 we call the method and check that res.jsonp was successfully called with the users data using sinons handy calledWith function.<br>
Finally on line 7 we call restore on User.findById to remove the stub and restore it&#8217;s original functionality. This is so if we have tests in the future that want to use the original function they won&#8217;t break unexpectedly.</p>
<p>This is by far the easiest way I&#8217;ve found to mock and unit test javascript though if you know of a better way let me know. I&#8217;m always trying to be as efficient as possible.</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				
<article id="post-79" class="post-79 post type-post status-publish format-standard hentry category-uncategorized tag-automatic-cooking tag-automation tag-food-hackers tag-home-automation tag-robotics tag-robots tag-tower-storm">
		    <header class="post-header">
        			<span class="post-meta">
				<span class="posted-on"><a href="/hundreds-of-robots-in-every-home/" rel="bookmark"><time class="entry-date published" datetime="2014-06-18T16:02:00+00:00">June 18, 2014</time></a></span><span class="byline"> by <span class="author vcard"><a class="url fn n" href="/author/tim/">Tim Robinson</a></span></span> on <a href="/category/uncategorized/" rel="category tag">Uncategorized</a>			</span>
		        <h1 class="post-title"><a href="/hundreds-of-robots-in-every-home/" rel="bookmark">Hundreds of robots in every home</a></h1>
         
    </header>
	<section class="post-content">

		<p>I used to have hundreds dreams and ideas I wanted to pursue. So many that I jumped from task to task like mad trying to make something happen and only ended up scratching the surface of a few. Recently I&#8217;ve realized there only 2 major ideas I keep coming back to that I wish to pursue more than anything else:</p>
<ul>
<li>Building Tower Storm into a big successful game that millions of people play and enjoy and I earn enough off to never have to worry about money again.
</li>
<li>
<p>Building a robotics company that makes producing your own food automatically a possibility for everyone on the planet.</p>
</li>
</ul>
<p>Tower Storm is already in progress, so in this post I want to talk about my vision for the future of robots.</p>
<p>I don&#8217;t believe there will be human like robots in every home as in bionical man, but I do think there will be hundreds of machines that will do most menial chores automatically. They&#8217;re already being made, in a crude unrecognisable form, via 3D Printers and open source circuitboards.</p>
<p>This reminds me of computers in the 70&#8217;s, they were toys that you had to solder and program yourself, there was no way everyone was going to have one let alone use it all the time. I feel that robots are at a similar stage.</p>
<p>What is needed now is a standard platform that all robots can build upon to work together to accomplish larger tasks. The robots would be modular and accomplish one function in a simple way on their own and they could then be combined in thousands of ways or sold in pre-packed sets to the non geeks out there.</p>
<p>Lets take cooking for an example. Making a spaghetti is somewhat complicated, but each step and microstep is pretty simple. Lets break down the steps:</p>
<ul>
<li>Cook Sauce
<ul>
<li>Put pot on hotplate</li>
<li>Turn hotplate on</li>
<li>Cook Onions
<ul>
<li>Peel onion</li>
<li>Slice onion</li>
<li>Transfer onion to pot</li>
<li>Stir for 2 minutes</li>
</ul>
</li>
<li>Add Mince
<ul>
<li>Defrost mince</li>
<li>Transfer to pot</li>
<li>Stir for 2 minutes</li>
</ul>
</li>
<li>Add jar of sauce
<ul>
<li>Open jar</li>
<li>Pour jar into pot</li>
</ul>
</li>
<li>Stir for 10 Minutes</li>
</ul>
</li>
<li>Cook Pasta
<ul>
<li>Open pasta packet</li>
</ul>
</li>
<li>Put sauce on pasta</li>
<li>Add cheese on sauce</li>
</ul>
<p>When you lay it out like that you can see there are a lot of small steps, but none are too complicated for a robot to do. So why don&#8217;t they do it? Well I believe they will 10 &#8211; 20 years from now, we simply need to build a system for robots to work together in a neat way (like unix pipes) so they can collaborate and make tasks like preparing dinner completely automated.</p>
<p>We&#8217;ve already got the infrastructure with 3D Printers and arduinos to make this happen, if the community created open source designs for robots that can do each of these tasks then anyone, anywhere could build robots that automate many of their cooking tasks for them, eventually not needing to cook at all.</p>
<p>What has me even more excited than cooking is producing food automatically. It seems even more complicated than cooking, but if we break it down into separate components we could build robots that create and maintain tiny at home vegetable farms or fruit trees.</p>
<p>Then if these designs are open sourced anyone anywhere in the world can live effortlessly off the grid with all their food made for them by a team of robots. Once we&#8217;ve automated much of the first worlds food supply we can even help out those less fortunate in the world. Everyone in the world could use them to have their own completely automated unlimited production farm.</p>
<p>This is what excites me most about 3D Printing and open source circuitboards. Not gadgets and toys but machines that can bring complete automation to everything we don&#8217;t want to do in our lives. so everyone in the world is free to focus on what they enjoy, creating amazing things and learning and giving back to society.</p>
<p>Sure it&#8217;s insanely complicated, but it&#8217;s doable,</p>
	    		<div class="clear">&nbsp;</div>
	</section>
</article><!-- #post-## -->
			
				<nav class="pagination navigation paging-navigation" role="navigation">
		<div class="nav-links">
						<div class="older-posts"><a href="/blog/page/4/">Older Posts <span class="meta-nav">&rarr;</span></a></div>
							<div class="page-number">Page 3 of 5</div>
						<div class="newer-posts"><a href="/blog/page/2/"><span class="meta-nav">&larr;</span> Newer Posts</a></div>
			
		</div>
<!-- .nav-links -->
	</nav><!-- .navigation -->
	

		

	<div id="secondary" class="widget-area" role="complementary">
		
		<aside id="recent-posts-2" class="widget widget_recent_entries">
		<h1 class="widget-title">Recent Posts</h1>
		<ul>
											<li>
					<a href="/universal-basic-income-is-capitalism-2-0/">Universal Basic Income is Capitalism 2.0</a>
									</li>
											<li>
					<a href="/how-to-combine-getting-things-done-with-trello/">How to combine Getting Things Done with Trello</a>
									</li>
											<li>
					<a href="/fixing-node-gyp-permission-denied-when-running-as-root/">Fixing node-gyp: Permission Denied when running as root</a>
									</li>
											<li>
					<a href="/neato-the-evolutionary-ai-battle-simulator/">NEATo &#8211; The Evolutionary AI Battle Simulator</a>
									</li>
											<li>
					<a href="/new-site-a-decentralized-world/">New Site &#8211; A Decentralized World</a>
									</li>
					</ul>

		</aside><aside id="custom_html-3" class="widget_text widget widget_custom_html"><h1 class="widget-title">Newsletter</h1>
<div class="textwidget custom-html-widget"><iframe src="https://timjrobinson.substack.com/embed" style="border:1px solid #EEE; background:white;" scrolling="no" width="700" height="320" frameborder="0"></iframe></div></aside>		<div class="clear">&nbsp;</div>
	</div>
<!-- #secondary -->
	<footer id="colophon" class="site-footer" role="contentinfo">
	    <a class="subscribe icon-feed" href="/feed/"><span class="tooltip">Subscribe!</span></a>
		<div class="site-info inner">
		    <section class="copyright">
		    			    		<a href="https://github.com/lacymorrow/casper" rel="home">Casper WP</a> by Lacy Morrow		    			    </section>
		</div>
<!-- .site-info -->
	</footer><!-- #colophon -->
</main><!-- /#content -->

<div class="a2a_kit a2a_kit_size_32 a2a_floating_style a2a_vertical_style" style="left:0px;top:100px;background-color:transparent">
<a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=%2Fblog%2Fpage%2F3%2F%3Fsimply_static_page%3D229&amp;linkname=TimJRobinson" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=%2Fblog%2Fpage%2F3%2F%3Fsimply_static_page%3D229&amp;linkname=TimJRobinson" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=%2Fblog%2Fpage%2F3%2F%3Fsimply_static_page%3D229&amp;linkname=TimJRobinson" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_pocket" href="https://www.addtoany.com/add_to/pocket?linkurl=%2Fblog%2Fpage%2F3%2F%3Fsimply_static_page%3D229&amp;linkname=TimJRobinson" title="Pocket" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=%2Fblog%2Fpage%2F3%2F%3Fsimply_static_page%3D229&amp;linkname=TimJRobinson" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share"></a>
</div>
<script type="text/javascript" id="disqus_count-js-extra">
/* <![CDATA[ */
var countVars = {"disqusShortname":"timjrobinsonblog"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/disqus-comment-system/public/js/comment_count.js?ver=3.0.22" id="disqus_count-js"></script>
<script type="text/javascript" src="/wp-content/themes/casper/js/main.js?ver=1.0.0" id="casper-index-js"></script>
</body>


<!-- Dynamic page generated in 0.037 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2023-02-19 09:58:31 -->

<!-- Compression = gzip -->
</html>